.Dd 2024/01/17              \" DATE
.Dt P0
.Os Reptilian
.Sh NAME                 \" Section Header - required - don't modify
.Nm Project 0
.\" Use .Nm macro to designate other names for the documented program.
.Nd My First Kernel Mod
.Sh SYNOPSIS             \" Section Header - required - don't modify
The purpose of
.Nm
is to build experience with modifying a linux kernel and applying patches.
.Sh DESCRIPTION          \" Section Header - required - don't modify
.Nm
begins by searching for a file where a specific function
(rcu_end_inkernel_boot()) is called. This was done by using the command:
grep -R "rcu_end_inkernel_boot()" /usr/rep/src.
This command pointed to the file "main.c" in the
/usr/rep/src/reptilian-kernel/init directory.
.sp 1
From here, we needed to explore the file utilizing nano
to find the line in the file where the rcu_end_inkernel_boot()
function is called. Using the ctrl-W find the command,
this line was found in the kernel_init function.
Immediately after where this function is called, a pr_err function
was added to print the requested info to the screen.
.sp 1
Finally, this edit needed to be applied. This was done by executing the "make"
and "sudo make install; sudo make modules_install" commands as specified in Ex0.
The virtual device was then restarted to confirm that the changes had taken
effect.
.sp 1
For the extra credit portion of
.Nm
I initially attempted to use a find command at the base root directory.
The result was a long list of files, none of which had the desired name.
After a session of googling, I came across the thread (2) in the See Also section,
which discussed a grub menu file. The file was not at the location that was stated
in the thread, but another grep for the grub file led me to the
menu.lst file in mnt/sysroot/grub,
and I was able to edit this file to produce the request results with a 
sudo nano command.
.sp 1
Finally, a patch was created and applied using the provided commands to a clean
VM instance to confirm that the changes worked as specified.
.Sh TESTING
All testing for
.Nm
was accomplished by applying changes and restarting the virtual device to
observe their effects.
.Sh FILES                \" File used or created by the topic of the man page
.Bl -tag -width
.It Pa /usr/rep/src/reptilian-kernel/init/main.c
The initilization file that was edited for the main portion of the assignment
.It Pa /mnt/sysroot/grub/menu.lst
The file that was edited for the extra credit portion of the project
.El
.Sh SEE ALSO
.Bl -tag -width
.It Pa (1) https://youtu.be/8wsLgq-kWtE
Project Screencast
.It Pa (2) https://askubuntu.com/questions/759600/how-to-safely-change-os-name-in-grub-boot-menu
Link that pointed me in the right direction for the menu.lst file
.El
.Sh BUGS
There are numbers surrounded by brackets where "\\n"s are used in the pr_err
function. Specifically my output shows several instances of [    10.142866].
These also appears in the reference screenshot,
and I was unable to find a solution to surpress this output.
.sp 1
The grub menu edit for the extra credit portion was not applied with the patch. I suspect that this is expected behavior, but am unable to confirm.
.\" .Sh HISTORY           \" Document history if command behaves in a unique manner